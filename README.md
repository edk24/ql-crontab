# 青龙面板脚本

此仓库包含一个丝路国际签到打卡脚本。

## 环境变量配置

### SLGJ_USER - 账户信息

#### 单账户格式
```
SLGJ_USER=phone=手机号&password=密码
```

例如：
```bash
export SLGJ_USER="phone=183014&password=Sl678"
```

#### 多账户格式（推荐）
支持同时配置多个账户，格式为拼接多个账户信息：
```
SLGJ_USER=phone=手机号1&password=密码1&phone=手机号2&password=密码2
```

例如：
```bash
export SLGJ_USER="phone=18311548014&password=Slgj12345678&phone=15086788255&password=Slgj12345678"
```

## 功能特性

✅ 支持单账户签到
✅ 支持多账户同时处理
✅ **域名获取优化** - 只获取一次可用域名，所有账户共用
✅ 自动获取用户信息和钱包余额
✅ **签到结果以表格形式展示** - 包含每个账户的详细信息
✅ **统一通知** - 仅在完成所有账户后发送一次表格统计报告
✅ 支持推送通知（青龙面板集成）

## 工作流程

1. **解析环境变量** - 支持多账户拆解
2. **获取可用域名** - 只获取一次，所有账户共用  
3. **批量处理账户** - 为每个账户执行以下步骤：
   - 登录验证
   - 获取钱包余额
   - 执行签到
   - 记录结果
4. **生成统计表格** - 展示所有账户的签到情况（每个账户单独信息，不汇总金额）
5. **发送表格通知** - 一次性发送包含表格的统计报告

## 输出示例

### 控制台输出表格
```
+────+──────────────+────────+────────+─────────────+─────────────+──────────────────┐
│ 序号│ 手机号         │ 昵称   │ 状态   │ 余额(¥)   │ 增加(¥)   │ 详情             │
+────+──────────────+────────+────────+─────────────+─────────────+──────────────────┤
│ 1  │ 183****8014  │ 张三   │ 成功   │ ¥100.00    │ ¥5.00     │ 签到成功         │
│ 2  │ 150****8255  │ 李四   │ 成功   │ ¥85.50     │ ¥3.00     │ 签到成功         │
+────+──────────────+────────+────────+─────────────+─────────────+──────────────────┘

📊 执行统计
总账户数: 2
成功: 2 ✅
失败: 0 ❌
异常: 0 ⚠️
```

### 推送通知内容
包含上述统计表格和汇总信息，一次性推送。

## 定时任务配置

在青龙面板中添加定时任务：

```
任务名：丝路国际签到
脚本：python3 /path/to/main.py
定时规则：0,10 9 * * *  （每天 9:00 和 9:10 执行）
```

## 性能优化

- 🚀 **域名获取优化** - 仅在启动时获取一次，避免重复网络请求
- ⏱️ **账户间延迟** - 自动在账户间延迟 3-8 秒，避免请求过快被限流
- 📋 **单一通知** - 所有账户完成后仅发送一次统计报告，减少通知数量
- 🎯 **简化通知** - 个别账户无需单独通知，表格中包含所有详细信息

## 注意事项

- 多账户处理时，脚本会在账户间自动延迟 3-8 秒
- 确保账户信息正确配置，手机号和密码必须匹配
- 支持与青龙面板的通知系统集成（PushPlus、Bark、Telegram 等）
- 表格中显示每个账户的独立余额和增加金额，不进行汇总



